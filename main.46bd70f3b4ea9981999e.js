(()=>{"use strict";class e{constructor(e){this.container=e,this.isFormVisible=!1,this.animationDuration=100,this.init()}init(){this.createWidget(),this.bindEvents()}createWidget(){this.widget=document.createElement("div"),this.widget.className="feedback-widget",this.widget.innerHTML='\n            <button class="feedback-toggle-btn visible" aria-label="Open feedback form">\n                <span class="feedback-btn-text">?</span>\n            </button>\n            \n            <div class="feedback-form hidden">\n                <div class="feedback-header">\n                    <h3 class="feedback-title">Напишите нам</h3>\n                    <button class="feedback-close-btn" aria-label="Close form">\n                        ×\n                    </button>\n                </div>\n                \n                <div class="feedback-message"></div>\n                \n                <form id="feedback-form">\n                    <div class="feedback-form-group">\n                        <textarea \n                            id="feedback-message" \n                            class="feedback-textarea" \n                            placeholder="Ваше сообщение..."\n                            required\n                        ></textarea>\n                    </div>\n                    \n                    <button type="submit" class="feedback-submit-btn">\n                        Отправить\n                    </button>\n                </form>\n            </div>\n        ',this.container.append(this.widget),this.toggleBtn=this.widget.querySelector(".feedback-toggle-btn"),this.form=this.widget.querySelector(".feedback-form"),this.closeBtn=this.widget.querySelector(".feedback-close-btn"),this.feedbackForm=this.widget.querySelector("#feedback-form"),this.messageEl=this.widget.querySelector(".feedback-message")}bindEvents(){this.toggleBtn.addEventListener("click",()=>this.openForm()),this.closeBtn.addEventListener("click",()=>this.closeForm()),this.feedbackForm.addEventListener("submit",e=>this.handleSubmit(e)),document.addEventListener("click",e=>{!this.isFormVisible||this.form.contains(e.target)||this.toggleBtn.contains(e.target)||this.closeForm()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isFormVisible&&this.closeForm()})}openForm(){this.isFormVisible||(this.toggleBtn.classList.remove("visible"),this.toggleBtn.classList.add("hidden"),setTimeout(()=>{this.form.classList.remove("hidden"),this.form.classList.add("visible"),this.isFormVisible=!0,this.form.querySelector("#feedback-message").focus()},this.animationDuration))}closeForm(){this.isFormVisible&&(this.form.classList.remove("visible"),this.form.classList.add("hidden"),setTimeout(()=>{this.toggleBtn.classList.remove("hidden"),this.toggleBtn.classList.add("visible"),this.isFormVisible=!1,this.feedbackForm.reset(),this.hideMessage()},this.animationDuration))}handleSubmit(e){e.preventDefault(),this.feedbackForm.querySelector("#feedback-message").value.trim()?(this.showMessage("Спасибо! Ваше сообщение отправлено.","success"),this.feedbackForm.reset(),setTimeout(()=>{this.closeForm()},2e3)):this.showMessage("Пожалуйста, напишите сообщение.","error")}showMessage(e,t){this.messageEl.textContent=e,this.messageEl.className=`feedback-message ${t}`,"success"===t&&setTimeout(()=>{this.hideMessage()},5e3)}hideMessage(){this.messageEl.className="feedback-message",this.messageEl.textContent=""}}class t{constructor(e){this.container=e,this.likeBtn=e.querySelector(".like-btn"),this.heartsContainer=e.querySelector(".hearts-container"),this.init()}init(){this.likeBtn.addEventListener("click",()=>this.createHeart())}createHeart(){const e=document.createElement("div");e.className="heart-element",e.style.backgroundImage=`url("data:image/svg+xml;utf8,${encodeURIComponent('\n            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" \n                      fill="#ff4444"/>\n            </svg>\n        ')}")`,e.style.backgroundSize="contain",e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition="center";const t=Math.floor(4*Math.random())+1,s=this.likeBtn.getBoundingClientRect(),i=this.container.getBoundingClientRect(),n=s.left+s.width/2-i.left-12,a=s.top+s.height/2-i.top-12;e.style.left=`${n}px`,e.style.top=`${a}px`,e.style.width="24px",e.style.height="24px",e.style.position="absolute",e.style.opacity="0",this.heartsContainer.append(e),e.offsetWidth,e.style.animation=`trajectory${t} 500ms ease-out forwards`,e.style.opacity="1",e.addEventListener("animationend",t=>{t.target===e&&e.parentNode&&e.remove()}),setTimeout(()=>{e.parentNode&&e.remove()},1e3)}}document.addEventListener("DOMContentLoaded",()=>{!function(){const e=document.querySelector(".collapse-btn"),t=document.querySelector(".collapsible-content");e&&t&&(e.addEventListener("click",function(){t.classList.contains("active")?(this.classList.remove("active"),t.classList.remove("active"),this.setAttribute("aria-expanded","false"),t.setAttribute("aria-hidden","true")):(this.classList.add("active"),t.classList.add("active"),this.setAttribute("aria-expanded","true"),t.setAttribute("aria-hidden","false"))}),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","collapsible-content"),t.setAttribute("aria-hidden","true"),t.id="collapsible-content",e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())}))}();const s=document.getElementById("feedback-widget");s&&new e(s);const i=document.querySelector(".liker-container");i&&new t(i)})})();